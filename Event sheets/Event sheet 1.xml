<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Event sheet 1</name>
    <events>
        <variable constant="0" name="FallFromTopC1" sid="5025872206760196" static="0" type="text">False</variable>
        <variable constant="0" name="StereotypeThreat" sid="4088953641968951" static="0" type="text">Off</variable>
        <variable constant="0" name="Confidence" sid="261748409792726" static="0" type="number">100</variable>
        <variable comment="For playtesting - strength, gravity, speed, etc" constant="0" name="StereotypeThreatMode" sid="384432846556123" static="0" type="text"></variable>
        <comment>Use the down arrow to allow the player to deliberately drop down through a jump-thru platform.</comment>
        <event-block sid="4937441876236133">
            <conditions>
                <condition behavior="Platform" id="3" name="Is jumping" sid="7585992242517911" type="Player" />
            </conditions>
            <actions>
                <action id="4" name="Set animation" sid="9821382274753278" type="Player">
                    <param id="0" name="Animation">&quot;Jumping&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4666950497462885">
            <conditions>
                <condition behavior="Platform" id="2" name="Is on floor" sid="5402821200410069" type="Player" />
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="3032830012211686">
                    <conditions>
                        <condition behavior="Platform" id="10" name="Is by wall" sid="7168429832821963" type="Player">
                            <param id="0" name="Side">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="7677991328826114" type="Player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7966547508462181">
                    <conditions>
                        <condition id="-22" name="Else" sid="3115081347964569" type="System" />
                        <condition behavior="Platform" id="10" name="Is by wall" sid="4152407039516839" type="Player">
                            <param id="0" name="Side">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="232939758419619" type="Player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7560455354413284">
                    <conditions>
                        <condition id="-22" name="Else" sid="7423666409991624" type="System" />
                        <condition behavior="Platform" id="0" name="Is moving" sid="5823945005700606" type="Player" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="6314369661472712" type="Player">
                            <param id="0" name="Animation">&quot;Walking&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5251415419431592">
                    <conditions>
                        <condition id="-22" name="Else" sid="3769714690182419" type="System" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="4990931841810408" type="Player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="6984278301397746">
            <conditions>
                <condition behavior="Platform" id="2" name="Is on floor" sid="2928923165570636" type="MaleExplorer" />
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="3325851255543898">
                    <conditions>
                        <condition behavior="Platform" id="10" name="Is by wall" sid="5856872379011285" type="MaleExplorer">
                            <param id="0" name="Side">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="1770648503487915" type="MaleExplorer">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2600778818516765">
                    <conditions>
                        <condition id="-22" name="Else" sid="4295314687960759" type="System" />
                        <condition behavior="Platform" id="0" name="Is moving" sid="7709551404068697" type="MaleExplorer" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="8838954768388494" type="MaleExplorer">
                            <param id="0" name="Animation">&quot;Walking&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="178433747785821">
                    <conditions>
                        <condition id="-22" name="Else" sid="9145942709456783" type="System" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="5347373590065637" type="MaleExplorer">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Mirror the player&apos;s image so they appear facing the right way when moving left or right.</comment>
        <event-block any="1" sid="9312895498575496">
            <conditions>
                <condition id="0" name="On key pressed" sid="6164485483284805" type="Keyboard">
                    <param id="0" name="Key">37 (Left arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="7" name="Set mirrored" sid="2108585279628952" type="Player">
                    <param id="0" name="State">0</param>
                </action>
            </actions>
        </event-block>
        <event-block any="1" sid="1299496006845272">
            <conditions>
                <condition id="0" name="On key pressed" sid="8845035353561981" type="Keyboard">
                    <param id="0" name="Key">39 (Right arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="7" name="Set mirrored" sid="884550084960513" type="Player">
                    <param id="0" name="State">1</param>
                </action>
            </actions>
        </event-block>
        <variable comment="How long before taking another chunk of damage from spikes" constant="0" name="TimeOfLastDamage" sid="7607592607069084" static="0" type="number">0</variable>
        <comment>If land on spikes, lose a bunch of confidence immediately and gradually lose more until you get off of them, or until a second passes.</comment>
        <event-block sid="2770252835999996">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="5629216206535351" type="Player">
                    <param id="0" name="Object">CenterSpikes</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="102802625227375" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Comparison">2</param>
                    <param id="2" name="Value">time-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Subtract from" sid="5369278506689451" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">10</param>
                </action>
                <action id="-9" name="Set value" sid="4403675484224019" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Value">time</param>
                </action>
                <action behavior="ScrollTo" id="0" name="Shake" sid="7937876608451314" type="Player">
                    <param id="0" name="Magnitude">20</param>
                    <param id="1" name="Duration">0.4</param>
                    <param id="2" name="Mode">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="6605733224740455">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="268835511540482" type="Player">
                    <param id="0" name="Object">LeftSpikes</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="7455531536382156" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Comparison">2</param>
                    <param id="2" name="Value">time-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Subtract from" sid="3465191094402477" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">10</param>
                </action>
                <action id="-9" name="Set value" sid="3709213671708081" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Value">time</param>
                </action>
                <action behavior="ScrollTo" id="0" name="Shake" sid="6962443428420677" type="Player">
                    <param id="0" name="Magnitude">20</param>
                    <param id="1" name="Duration">0.4</param>
                    <param id="2" name="Mode">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="5586328379240207">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="776750820233655" type="Player">
                    <param id="0" name="Object">RightSpikes</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="9764383943310933" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Comparison">2</param>
                    <param id="2" name="Value">time-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Subtract from" sid="2742626210031137" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">10</param>
                </action>
                <action id="-9" name="Set value" sid="4342413207781938" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Value">time</param>
                </action>
                <action behavior="ScrollTo" id="0" name="Shake" sid="6945380479448039" type="Player">
                    <param id="0" name="Magnitude">20</param>
                    <param id="1" name="Duration">0.4</param>
                    <param id="2" name="Mode">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="2961328511090889">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="2334563366550877" type="Player">
                    <param id="0" name="Object">LeftSpikes</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="1104791769744439" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Comparison">5</param>
                    <param id="2" name="Value">time-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Subtract from" sid="9792368151883406" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">0.5</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="2209806221353199">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="3514744934161543" type="Player">
                    <param id="0" name="Object">RightSpikes</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="5682081886762695" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Comparison">5</param>
                    <param id="2" name="Value">time-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Subtract from" sid="63748275303822" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">0.5</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="3998955102154366">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="2864361169724479" type="Player">
                    <param id="0" name="Object">CenterSpikes</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="60608327520151" type="System">
                    <param id="0" name="Variable">TimeOfLastDamage</param>
                    <param id="1" name="Comparison">5</param>
                    <param id="2" name="Value">time-1</param>
                </condition>
            </conditions>
            <actions>
                <action id="-11" name="Subtract from" sid="5677133240396931" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">0.5</param>
                </action>
            </actions>
        </event-block>
        <comment>If near healer (in this scheme, if overlapping the currently very large collision box), heal a bit over time</comment>
        <event-block sid="7884842905284578">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="3857188139758771" type="Player">
                    <param id="0" name="Object">Healer</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="7964013611458537" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Comparison">2</param>
                    <param id="2" name="Value">100</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Add to" sid="494310611197653" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">0.1</param>
                </action>
                <action id="-9" name="Set value" sid="2081431250710271" type="System">
                    <param id="0" name="Variable">StereotypeThreat</param>
                    <param id="1" name="Value">&quot;Off&quot;</param>
                </action>
            </actions>
        </event-block>
        <comment>If run out of confidence, restart the level (for now)</comment>
        <event-block sid="2602431857037689">
            <conditions>
                <condition id="-14" name="Compare variable" sid="2402271985771649" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="9083223041244931" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">100</param>
                </action>
                <action id="-9" name="Set value" sid="7260499948734266" type="System">
                    <param id="0" name="Variable">isDead</param>
                    <param id="1" name="Value">&quot;True&quot;</param>
                </action>
                <action id="-9" name="Set value" sid="8990373241421433" type="System">
                    <param id="0" name="Variable">PreviousLevel</param>
                    <param id="1" name="Value">LayoutName</param>
                </action>
                <action id="-2" name="Go to layout" sid="2167007734180719" type="System">
                    <param id="0" name="Layout">Death</param>
                </action>
            </actions>
        </event-block>
        <comment>Normal player attributes</comment>
        <variable constant="0" name="NormalJumpStrength" sid="5296609344364002" static="0" type="number">650</variable>
        <variable constant="0" name="NormalGravity" sid="1453190809931728" static="0" type="number">1500</variable>
        <variable constant="0" name="NormalMaxSpeed" sid="3664709792189393" static="0" type="number">330</variable>
        <variable constant="0" name="NormalMaxFallSpeed" sid="4136746460324879" static="0" type="number">1000</variable>
        <comment>Setting the normal things</comment>
        <event-block sid="5194287711912814">
            <conditions>
                <condition id="-1" name="Every tick" sid="1094273347508541" type="System" />
            </conditions>
            <actions>
                <action behavior="Platform" id="4" name="Set jump strength" sid="7153981694188246" type="Player">
                    <param id="0" name="Jump strength">NormalJumpStrength</param>
                </action>
                <action behavior="Platform" id="5" name="Set gravity" sid="1524972397901748" type="Player">
                    <param id="0" name="Gravity">NormalGravity</param>
                </action>
                <action behavior="Platform" id="1" name="Set max speed" sid="1502622807059261" type="Player">
                    <param id="0" name="Max Speed">NormalMaxSpeed</param>
                </action>
                <action behavior="Platform" id="6" name="Set max fall speed" sid="3428397533178259" type="Player">
                    <param id="0" name="Max fall speed">NormalMaxFallSpeed</param>
                </action>
                <action id="-3" name="Set position" sid="3628511314494306" type="ConfidenceBubble">
                    <param id="0" name="X">Player.X</param>
                    <param id="1" name="Y">Player.Y</param>
                </action>
                <action id="9" name="Set scale" sid="392129962728687" type="ConfidenceBubble">
                    <param id="0" name="Scale">1*Confidence/100</param>
                </action>
                <action id="-16" name="Set opacity" sid="135906544863241" type="ConfidenceBubble">
                    <param id="0" name="Opacity">Confidence</param>
                </action>
                <action id="-9" name="Set value" sid="7154160482142545" type="System">
                    <param id="0" name="Variable">StereotypeThreat</param>
                    <param id="1" name="Value">&quot;Off&quot;</param>
                </action>
            </actions>
        </event-block>
        <comment>Stereotype Threat (ST) attributes - e.g. jump strength gets set to STJumpStrength if StereotypeThreatMode is &quot;Strength&quot;, but the others unaffected</comment>
        <variable constant="0" name="STJumpStrength" sid="4358851880067204" static="0" type="number">520</variable>
        <variable constant="0" name="STGravity" sid="9911945571980508" static="0" type="number">1500</variable>
        <variable constant="0" name="STMaxSpeed" sid="5761365743249245" static="0" type="number">330</variable>
        <variable constant="0" name="STFallSpeed" sid="2800836596838828" static="0" type="number">1000</variable>
        <comment>Stereotype threat! Each frame it&apos;s off until it picks up an active STTrigger within range.</comment>
        <event-block sid="4452750037056116">
            <conditions>
                <condition id="-9" name="Is visible" sid="1238174313062442" type="STTrigger" />
                <condition id="-24" name="For Each (ordered)" sid="2613062920690919" type="System">
                    <param id="0" name="Object">STTrigger</param>
                    <param id="1" name="Expression">STTrigger.X</param>
                    <param id="2" name="Order">0</param>
                </condition>
                <condition id="-8" name="Compare two values" sid="7893380314542014" type="System">
                    <param id="0" name="First value">distance(Player.X, Player.Y, STTrigger.X, STTrigger.Y)</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Second value">STTrigger.Range</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="7092804028824852" type="System">
                    <param id="0" name="Variable">StereotypeThreat</param>
                    <param id="1" name="Value">&quot;On&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="3919027969194493">
            <conditions>
                <condition id="-14" name="Compare variable" sid="48268591525622" type="System">
                    <param id="0" name="Variable">StereotypeThreat</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">&quot;On&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Platform" id="4" name="Set jump strength" sid="9657913943137944" type="Player">
                    <param id="0" name="Jump strength">STJumpStrength</param>
                </action>
                <action behavior="Platform" id="5" name="Set gravity" sid="5090835398238174" type="Player">
                    <param id="0" name="Gravity">STGravity</param>
                </action>
                <action behavior="Platform" id="1" name="Set max speed" sid="9630530949981609" type="Player">
                    <param id="0" name="Max Speed">STMaxSpeed</param>
                </action>
                <action behavior="Platform" id="6" name="Set max fall speed" sid="6681009711672461" type="Player">
                    <param id="0" name="Max fall speed">STFallSpeed</param>
                </action>
                <action id="-16" name="Set opacity" sid="5617973981376829" type="STOverlay">
                    <param id="0" name="Opacity">STOverlay.Opacity+12</param>
                </action>
                <action id="4" name="Set animation" sid="9710350827151247" type="CenterSpikes">
                    <param id="0" name="Animation">&quot;Watching&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="676612172305865" type="LeftSpikes">
                    <param id="0" name="Animation">&quot;Watching&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="5694061668589113" type="RightSpikes">
                    <param id="0" name="Animation">&quot;Watching&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="725589315372123" type="SingleSpikes">
                    <param id="0" name="Animation">&quot;Watching&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="3658798405365847">
            <conditions>
                <condition id="-22" name="Else" sid="237685826035771" type="System" />
            </conditions>
            <actions>
                <action id="-16" name="Set opacity" sid="6467939718682401" type="STOverlay">
                    <param id="0" name="Opacity">STOverlay.Opacity-10</param>
                </action>
                <action id="4" name="Set animation" sid="8104634642043953" type="CenterSpikes">
                    <param id="0" name="Animation">&quot;Default&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="8654348164532176" type="LeftSpikes">
                    <param id="0" name="Animation">&quot;Default&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="4550470166562106" type="RightSpikes">
                    <param id="0" name="Animation">&quot;Default&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="1294701714759788" type="SingleSpikes">
                    <param id="0" name="Animation">&quot;Default&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
            </actions>
        </event-block>
        <comment>When you step on a trap that creates the trigger</comment>
        <event-block sid="9152782225960332">
            <conditions>
                <condition id="0" name="On collision with another object" sid="1856061374399068" type="Player">
                    <param id="0" name="Object">TrapCollider</param>
                </condition>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="3599337804501657" type="TrapCollider">
                    <param id="0" name="Instance variable">Activated</param>
                </condition>
            </conditions>
            <actions>
                <action id="-15" name="Set visible" sid="5410435396888078" type="STTrigger">
                    <param id="0" name="Visibility">1</param>
                </action>
                <action id="-13" name="Set boolean" sid="6361341689148992" type="TrapCollider">
                    <param id="0" name="Instance variable">Activated</param>
                    <param id="1" name="Value">1</param>
                </action>
            </actions>
        </event-block>
        <comment>For changing rules and stuff realtime during playtesting...</comment>
        <variable comment="Whether to override the stereotype threat triggers with the toggle dropdown" constant="0" name="PlaytestOverride" sid="4234821583045788" static="0" type="text"></variable>
        <comment>Doors - they lead to wherever their LeadsTo instance variable says (which we can set for each door instance from the Layout editor)</comment>
        <event-block sid="4292589187048332">
            <conditions>
                <condition id="0" name="On key pressed" sid="4887461129930532" type="Keyboard">
                    <param id="0" name="Key">40 (Down arrow)</param>
                </condition>
                <condition id="1" name="Is overlapping another object" sid="7886215540169093" type="Player">
                    <param id="0" name="Object">SuperDoor</param>
                </condition>
            </conditions>
            <actions>
                <action id="-25" name="Go to layout (by name)" sid="8103547399045372" type="System">
                    <param id="0" name="Layout">SuperDoor.LeadsTo</param>
                </action>
                <action id="-9" name="Set value" sid="2618123643855214" type="System">
                    <param id="0" name="Variable">isDead</param>
                    <param id="1" name="Value">&quot;False&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="9314183454976592">
            <conditions>
                <condition id="0" name="On key pressed" sid="1201334094329971" type="Keyboard">
                    <param id="0" name="Key">40 (Down arrow)</param>
                </condition>
                <condition id="1" name="Is overlapping another object" sid="5832333588023051" type="Player">
                    <param id="0" name="Object">SubDoor</param>
                </condition>
            </conditions>
            <actions>
                <action id="-25" name="Go to layout (by name)" sid="125473783942328" type="System">
                    <param id="0" name="Layout">SubDoor.LeadsTo</param>
                </action>
                <action id="-9" name="Set value" sid="9311467310096519" type="System">
                    <param id="0" name="Variable">isDead</param>
                    <param id="1" name="Value">&quot;False&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="9238026443123826">
            <conditions>
                <condition id="0" name="On key pressed" sid="5927722267053605" type="Keyboard">
                    <param id="0" name="Key">40 (Down arrow)</param>
                </condition>
                <condition id="1" name="Is overlapping another object" sid="4911696599549181" type="Player">
                    <param id="0" name="Object">Porthole</param>
                </condition>
            </conditions>
            <actions>
                <action id="-1" name="Set X" sid="9667180800655169" type="Player">
                    <param id="0" name="X">Porthole.NextPositionX</param>
                </action>
                <action id="-2" name="Set Y" sid="1460900062343471" type="Player">
                    <param id="0" name="Y">Porthole.NextPositionY</param>
                </action>
            </actions>
        </event-block>
        <comment>Keys and locks</comment>
        <event-block sid="4711074655388404">
            <conditions>
                <condition id="-8" name="Is boolean instance variable set" sid="9741132814635955" type="Key">
                    <param id="0" name="Instance variable">PickedUp</param>
                </condition>
            </conditions>
            <actions>
                <action id="-4" name="Set position to another object" sid="4103571985288914" type="Key">
                    <param id="0" name="Object">Player</param>
                    <param id="1" name="Image point (optional)">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="6078907512534404">
            <conditions>
                <condition id="0" name="On collision with another object" sid="7418328847015677" type="Player">
                    <param id="0" name="Object">Key</param>
                </condition>
            </conditions>
            <actions>
                <action id="-13" name="Set boolean" sid="4225786549866575" type="Key">
                    <param id="0" name="Instance variable">PickedUp</param>
                    <param id="1" name="Value">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="7163231747159944">
            <conditions>
                <condition id="0" name="On collision with another object" sid="8910837532331525" type="Key">
                    <param id="0" name="Object">Lock</param>
                </condition>
                <condition id="-7" name="Compare instance variable" sid="2022529736165468" type="Lock">
                    <param id="0" name="Instance variable">Color</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">Key.Color</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Destroy" sid="5984242031235999" type="Lock" />
                <action id="-9" name="Destroy" sid="4020558458793021" type="Key" />
            </actions>
        </event-block>
        <variable comment="Whether we&apos;re displaying text or not" constant="0" name="DisplayingText" sid="9430502538177119" static="0" type="text">False</variable>
        <comment>Setting the text at the start of the level and making sure the confidence bubble is in front of all but the solid tiles</comment>
        <event-block sid="8971721187247068">
            <conditions>
                <condition id="-2" name="On start of layout" sid="9876884772866672" type="System" />
            </conditions>
            <actions>
                <action id="0" name="Add key" sid="4252458096880545" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level A1 Start&quot;</param>
                    <param id="1" name="Value">&quot;&apos;The first thing to remember when you get down there is to use the arrow keys to move.&apos; - Father H. Father H is a great teacher, but he&apos;s way too worried. There&apos;s no need to get upset over me!&quot; &amp; newline &amp; &quot;Sometimes his advice is distracting, so I just hit down arrow to get it out of my head.&quot;</param>
                </action>
                <action id="0" name="Add key" sid="7243528591470964" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level A2 Start&quot;</param>
                    <param id="1" name="Value">&quot;&apos;So, YOU think you have what it takes to become an explorer?  We&apos;re not playing dolls and dress-up down here - the fate of the village depends on us finding that relic. Just don&apos;t get in my way.&apos;- V&quot;</param>
                </action>
                <action id="0" name="Add key" sid="5152925871404224" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level A3 Start&quot;</param>
                    <param id="1" name="Value">&quot;Not all doors are open to you yet - for one thing, access to some rooms requires a key... -Father H&quot;</param>
                </action>
                <action id="0" name="Add key" sid="9862869336649597" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level A4 Start&quot;</param>
                    <param id="1" name="Value">&quot;An elevator! I wonder if I can make use of that.&quot;</param>
                </action>
                <action id="0" name="Add key" sid="9468569074583213" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level A5 Start&quot;</param>
                    <param id="1" name="Value">&quot;That... was disappointing.&quot;</param>
                </action>
                <action id="0" name="Add key" sid="4715719614590769" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level A6 Start&quot;</param>
                    <param id="1" name="Value">&quot;That was really close. This is getting to be more than I thought...&quot;</param>
                </action>
                <action id="0" name="Add key" sid="6587192187194758" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level B1 Start&quot;</param>
                    <param id="1" name="Value">&quot;Hey, that&apos;s V over there! Wait... what&apos;s that blue thing?&quot;</param>
                </action>
                <action id="0" name="Add key" sid="2542405754990705" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level B2 Start&quot;</param>
                    <param id="1" name="Value">&quot;So I guess they have elevator access. Great. Why didn&apos;t they want me to join the Promising Explorers? And what kind of Promising Explorers need that much guidance, anyway?&quot;</param>
                </action>
                <action id="0" name="Add key" sid="7112955970850384" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level B3 Start&quot;</param>
                    <param id="1" name="Value">&quot;I guess it&apos;s more difficult for me than for them for stupid reasons. But I can&apos;t let them think I can&apos;t do it, right? ... I shouldn&apos;t let them think so.&quot;</param>
                </action>
                <action id="0" name="Add key" sid="154883615233891" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level C1 Start&quot;</param>
                    <param id="1" name="Value">&quot;I really just wish I had some support.&quot;</param>
                </action>
                <action id="0" name="Add key" sid="311504505254256" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level C2 Start&quot;</param>
                    <param id="1" name="Value">&quot;...&quot;</param>
                </action>
                <action id="0" name="Add key" sid="7196251861841288" type="TextScriptMap">
                    <param id="0" name="Key">&quot;Level C3 Start&quot;</param>
                    <param id="1" name="Value">&quot;&apos;Wait! Be careful. I&apos;ve been trying to help out a girl down there, but she fell through the cave...&apos;&quot;</param>
                </action>
                <action id="-24" name="Move to top" sid="5579502612629948" type="ConfidenceBubble" />
                <action id="-24" name="Move to top" sid="1046834208211288" type="SolidTile" />
                <action id="0" name="Set text" sid="6063147676240336" type="ScriptText">
                    <param id="0" name="Text">TextScriptMap.Get(LayoutName &amp; &quot; Start&quot;)</param>
                </action>
                <action id="-9" name="Set value" sid="9075597813902095" type="System">
                    <param id="0" name="Variable">DisplayingText</param>
                    <param id="1" name="Value">&quot;True&quot;</param>
                </action>
                <action id="-10" name="Add to" sid="8893497041637085" type="System">
                    <param id="0" name="Variable">Confidence</param>
                    <param id="1" name="Value">30</param>
                </action>
                <action id="-3" name="Set position" sid="90637688435822" type="TextBackdrop">
                    <param id="0" name="X">0</param>
                    <param id="1" name="Y">320</param>
                </action>
                <action id="-3" name="Set position" sid="8137884636486693" type="ScriptText">
                    <param id="0" name="X">32</param>
                    <param id="1" name="Y">352</param>
                </action>
                <action id="4" name="Set animation" sid="7974388828104832" type="Key">
                    <param id="0" name="Animation">Key.Color</param>
                    <param id="1" name="From">1</param>
                </action>
                <action id="4" name="Set animation" sid="199917762102696" type="Lock">
                    <param id="0" name="Animation">Lock.Color</param>
                    <param id="1" name="From">1</param>
                </action>
                <action behavior="Physics" id="27" name="Set enabled" sid="5015584946933841" type="FallingTile">
                    <param id="0" name="Mode">0</param>
                </action>
            </actions>
        </event-block>
        <comment>By default, running into a ScriptTrigger displays its Text</comment>
        <event-block sid="753406837318355">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="8750873904428183" type="Player">
                    <param id="0" name="Object">ScriptTrigger</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Set text" sid="9438855837019547" type="ScriptText">
                    <param id="0" name="Text">ScriptTrigger.Text</param>
                </action>
                <action id="-13" name="Set boolean" sid="8021903134203901" type="ScriptTrigger">
                    <param id="0" name="Instance variable">Activated</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="-9" name="Set value" sid="2101531747997482" type="System">
                    <param id="0" name="Variable">DisplayingText</param>
                    <param id="1" name="Value">&quot;True&quot;</param>
                </action>
                <action id="-22" name="Set angle toward position" sid="6830457166845203" type="ThoughtBubbleTail">
                    <param id="0" name="X">Player.X</param>
                    <param id="1" name="Y">Player.Y</param>
                </action>
                <action id="-15" name="Set visible" sid="5430540068993927" type="ThoughtBubbleTail">
                    <param id="0" name="Visibility">1</param>
                </action>
            </actions>
            <sub-events>
                <comment>But if its text needs to be multi-line (i.e. with line breaks), we use its ScriptKey to find a string in TextScriptMap that we set at the start of the layout</comment>
                <event-block sid="2956441818313777">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="5815270603052739" type="ScriptTrigger">
                            <param id="0" name="Instance variable">ScriptKey</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Value">&quot;&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="7229668651502387" type="ScriptText">
                            <param id="0" name="Text">TextScriptMap.Get(ScriptTrigger.ScriptKey)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="5216752596742146">
            <conditions>
                <condition id="-22" name="Else" sid="4498770769688786" type="System" />
            </conditions>
            <actions>
                <action id="-15" name="Set visible" sid="3083337256049436" type="ThoughtBubbleTail">
                    <param id="0" name="Visibility">0</param>
                </action>
            </actions>
        </event-block>
        <comment>Displaying the text + backdrop</comment>
        <event-block sid="5834674740278946">
            <conditions>
                <condition id="-14" name="Compare variable" sid="9034262460323727" type="System">
                    <param id="0" name="Variable">DisplayingText</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">&quot;True&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="-15" name="Set visible" sid="8515019181606677" type="TextBackdrop">
                    <param id="0" name="Visibility">1</param>
                </action>
                <action id="-15" name="Set visible" sid="5242073703859205" type="ScriptText">
                    <param id="0" name="Visibility">1</param>
                </action>
                <action id="10" name="Load image from URL" sid="7869517103043137" type="ScriptTrigger">
                    <param id="0" name="URI">ScriptTrigger.Image</param>
                    <param id="1" name="Size">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="25363927512154">
            <conditions>
                <condition id="-22" name="Else" sid="6811283108207654" type="System" />
            </conditions>
            <actions>
                <action id="-15" name="Set visible" sid="786766833279374" type="TextBackdrop">
                    <param id="0" name="Visibility">0</param>
                </action>
                <action id="-15" name="Set visible" sid="8867364136586201" type="ScriptText">
                    <param id="0" name="Visibility">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4023903533912422">
            <conditions>
                <condition id="0" name="On key pressed" sid="5597221722127916" type="Keyboard">
                    <param id="0" name="Key">40 (Down arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="564618842644134" type="System">
                    <param id="0" name="Variable">DisplayingText</param>
                    <param id="1" name="Value">&quot;False&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="5140614726510509">
            <conditions>
                <condition id="1" inverted="1" name="Is overlapping another object" sid="1338646270469681" type="Player">
                    <param id="0" name="Object">ScriptTrigger</param>
                </condition>
                <condition id="-8" name="Is boolean instance variable set" sid="9025215539937293" type="ScriptTrigger">
                    <param id="0" name="Instance variable">Activated</param>
                </condition>
            </conditions>
            <actions>
                <action id="-13" name="Set boolean" sid="7522972749111137" type="ScriptTrigger">
                    <param id="0" name="Instance variable">Activated</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-9" name="Set value" sid="2791973394492659" type="System">
                    <param id="0" name="Variable">DisplayingText</param>
                    <param id="1" name="Value">&quot;False&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="9289506262949716">
            <conditions>
                <condition behavior="Platform" id="2" name="Is on floor" sid="2700396710061045" type="Player" />
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="2930738002651972">
                    <conditions>
                        <condition behavior="Platform" id="10" name="Is by wall" sid="8066014438381973" type="Player">
                            <param id="0" name="Side">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="7791574299827844" type="Player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2791532872994757">
                    <conditions>
                        <condition id="-22" name="Else" sid="9825725541862126" type="System" />
                        <condition behavior="Platform" id="10" name="Is by wall" sid="4006999657695417" type="Player">
                            <param id="0" name="Side">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="8610371628741374" type="Player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1812966418449519">
                    <conditions>
                        <condition id="-22" name="Else" sid="1137569819951831" type="System" />
                        <condition behavior="Platform" id="0" name="Is moving" sid="6726487788407388" type="Player" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="6694733599330583" type="Player">
                            <param id="0" name="Animation">&quot;Walking&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7829467621800129">
                    <conditions>
                        <condition id="-22" name="Else" sid="3201412559430432" type="System" />
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="3546449532650994" type="Player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="7760684147828902">
            <conditions>
                <condition id="0" name="On collision with another object" sid="759684978262668" type="Player">
                    <param id="0" name="Object">LevelChangeTrigger</param>
                </condition>
            </conditions>
            <actions>
                <action id="-25" name="Go to layout (by name)" sid="2037519525975998" type="System">
                    <param id="0" name="Layout">LevelChangeTrigger.LeadsTo</param>
                </action>
                <action id="-9" name="Set value" sid="1294819686541178" type="System">
                    <param id="0" name="Variable">FallFromTop</param>
                    <param id="1" name="Value">&quot;True&quot;</param>
                </action>
            </actions>
        </event-block>
        <comment>To add the male explorer&apos;s large confidence bubble. TODO: right now it only attaches to one explorer?</comment>
        <event-block sid="6422088845480998">
            <conditions>
                <condition id="-18" name="On created" sid="5390465966137867" type="MaleExplorer" />
            </conditions>
            <actions>
                <action behavior="Pin" id="0" name="Pin to object" sid="6054195918544817" type="HugeConfidenceBubble">
                    <param id="0" name="Pin to">MaleExplorer</param>
                    <param id="1" name="Mode">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4595507097878133">
            <conditions>
                <condition behavior="Timer" id="0" name="On timer" sid="2170667670308582" type="FallingTile">
                    <param id="0" name="Tag">&quot;on_collided&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Physics" id="27" name="Set enabled" sid="9912227465401925" type="FallingTile">
                    <param id="0" name="Mode">1</param>
                </action>
                <action behavior="Physics" id="0" name="Apply force" sid="3787000847973073" type="FallingTile">
                    <param id="0" name="Force X">0</param>
                    <param id="1" name="Force Y">50</param>
                    <param id="2" name="Image point">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="3060159350278507">
            <conditions>
                <condition id="0" name="On collision with another object" sid="9501378637540404" type="Player">
                    <param id="0" name="Object">FallingTile</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Timer" id="0" name="Start timer" sid="7488622192586491" type="FallingTile">
                    <param id="0" name="Duration">0.5</param>
                    <param id="1" name="Type">0</param>
                    <param id="2" name="Tag">&quot;on_collided&quot;</param>
                </action>
                <action behavior="Flash" id="0" name="Flash" sid="5349879462340828" type="FallingTile">
                    <param id="0" name="&apos;On&apos; time">0.05</param>
                    <param id="1" name="&apos;Off&apos; time">0.05</param>
                    <param id="2" name="Duration">1.0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4484554724340559">
            <conditions>
                <condition id="1" name="Is overlapping another object" sid="5893177259100067" type="Player">
                    <param id="0" name="Object">LevelChangeTrigger</param>
                </condition>
            </conditions>
            <actions>
                <action id="-25" name="Go to layout (by name)" sid="1227505772060451" type="System">
                    <param id="0" name="Layout">LevelChangeTrigger.LeadsTo</param>
                </action>
                <action id="-9" name="Set value" sid="5279587440436657" type="System">
                    <param id="0" name="Variable">FallFromTopC1</param>
                    <param id="1" name="Value">&quot;True&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="8967164965768926">
            <conditions>
                <condition id="-14" name="Compare variable" sid="1750889817240644" type="System">
                    <param id="0" name="Variable">FallFromTopC1</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">&quot;True&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="7397875188369066">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="6360901525248668" type="System" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Set position" sid="5653539808525795" type="Player">
                            <param id="0" name="X">1568</param>
                            <param id="1" name="Y">50</param>
                        </action>
                        <action id="0" name="Set text" sid="3509434058423106" type="ScriptText">
                            <param id="0" name="Text">&quot;Whoa! Phew! I guess that was the way out. ... if only that girl could&apos;ve come with me.&quot;</param>
                        </action>
                        <action id="-9" name="Set value" sid="2918539717693647" type="System">
                            <param id="0" name="Variable">FallFromTopC1</param>
                            <param id="1" name="Value">&quot;False&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
    </events>
</c2eventsheet>
